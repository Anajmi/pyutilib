language: python

matrix:
  include:
    - python: "2.6"
      env: PYRO="Pyro"  YAML="pyyaml"
    - python: "2.7"
      env: PYRO="Pyro"  YAML="pyyaml"
    - python: "2.7"
      env: PYRO="Pyro" JYTHON="org.python:jython-installer:2.7.0"
    - python: "pypy"
      env: PYRO="Pyro"  YAML="pyyaml"
    - python: "3.4"
      env: PYRO="Pyro4" YAML="pyyaml"
    - python: "3.5"
      env: PYRO="Pyro4" YAML="pyyaml"
    - python: "pypy3"
      env: PYRO="Pyro4" YAML="pyyaml"
    - python: "3.5"
      env: PYRO="Pyro4" YAML=""

install: 
    - if [ -n "${JYTHON}" ]; then source install_jython.sh; fi
    - if [ -n "${YAML}" ]; then pip install pyyaml; fi
    - if [ "${TRAVIS_PYTHON_VERSION}" = "2.6" ]; then pip install ordereddict; fi
    - pip install xlrd
    - pip install openpyxl
    - pip install $PYRO
    - pip install coverage
    - python setup.py develop

script:
    #- python --version
    #- python -c 'import os; print dir(os);'
    - cd ..
    #- pwd
    #- printenv
    - cp pyutilib/.coveragerc .
    - test.pyutilib --cat=nightly --cov

after_success:
    - pip install codecov
    #- cp ../.coverage .
    - codecov
    #- pip install python-coveralls
    #- cp ../.coverage .
    #- coveralls
