language: python
matrix:
  include:
  - python: '2.6'
    env: PYRO="Pyro"  YAML="pyyaml"
  - python: '2.7'
    env: PYRO="Pyro"  YAML="pyyaml"
  #- python: '2.7'
  #  env: PYRO="Pyro" JYTHON="org.python:jython-installer:2.7.0"
  #- python: pypy
  #  env: PYRO="Pyro"  YAML="pyyaml"
  #- python: '3.4'
  #  env: PYRO="Pyro4" YAML="pyyaml"
  #- python: '3.5'
  #  env: PYRO="Pyro4" YAML="pyyaml"
  #- python: pypy3
  #  env: PYRO="Pyro4" YAML="pyyaml"
  #- python: '3.5'
  #  env: PYRO="Pyro4" YAML=""
install:
  - if [ -n "${JYTHON}" ]; then source install_jython.sh; fi
  - if [ -n "${YAML}" ]; then pip install pyyaml; fi
  - if [ "${TRAVIS_PYTHON_VERSION}" = "2.6" ]; then pip install ordereddict; fi
  - pip install xlrd
  - pip install openpyxl
  - pip install $PYRO
  - pip install coverage
  - python setup.py develop
script:
  - cd ..
  - cp pyutilib/.coveragerc .
  - test.pyutilib --cat=nightly --cov
after_success:
  - pip install codecov
  - codecov
  - pip install python-coveralls
  - coveralls

  - cd $TRAVIS_BUILD_DIR
  #- pwd
  #- ls
  #- git status
deploy:
  - provider: pypi
    server: 'https://testpypi.python.org/pypi'
    user: whart111
    password:
      secure: QlDPVHzD56L3G63E2vSn3Va/vmr3amuuHnseDi0pUC2lxOa9vwfIwvuRrG1myyru+fwK+XLgslto+FCwx5JR1ZE16T6LciZWOpunOxuw0iLaLe6nReaVE/6Oq7WMmPaYGLFTTtQaqrJpNmrTNpl8LcJMtdybfZ/7aghg+EhI3ineBb1+ZshxejhSRjcHpixh0g3Rw0BNi2uYru7y3XDo+YfPhExkwudi9AyBqN01WN5vG1+APEoTYbfGIp7FegJopX7pihrarZwEt7HFZ6PgcXxYke4is4IEdGz+rrseJrC4M2LZI7UIBOTmrXtn+3XliDLnDw00Eodbd+atcZIbJuJjJbdqOOapEc5DSIw+ERZppvygEwbazJpuX84mY37Yes0hHwOF9hd8J4eYHQ9qcaPf1H7axWBw76Fz8cOQ3HOwbVa5ggYK4Rb1ipjePjDsV6bQadlG1mbbRcYxTrQP+foxaCLPL74BQX7rxH1TzUOz98luR+Vnu7R9yu+Gv55I0CRlVyjp6aO/65pH5gXl9COxcGFxl6aDRKAhG+HxFdzMsga3n9OC/IdbVhxkCDxbFjmFJkZYLcLDkq2HjmpUt/s8r+LyVqEiyoamZ1kDXGK2YvAkWOoo1ZWDnJTApNTfVAzpTs0VYz2/dF2UKn+qm8JYzUoYLcW6S2BsWCzmaUA=
    distributions: sdist --format=gztar bdist_wheel
    on:
      tags: false
      branch: master
      python: '2.7'
      condition: '"$YAML" = "pyyaml"'
  - provider: pypi
    user: whart111
    password:
      secure: QlDPVHzD56L3G63E2vSn3Va/vmr3amuuHnseDi0pUC2lxOa9vwfIwvuRrG1myyru+fwK+XLgslto+FCwx5JR1ZE16T6LciZWOpunOxuw0iLaLe6nReaVE/6Oq7WMmPaYGLFTTtQaqrJpNmrTNpl8LcJMtdybfZ/7aghg+EhI3ineBb1+ZshxejhSRjcHpixh0g3Rw0BNi2uYru7y3XDo+YfPhExkwudi9AyBqN01WN5vG1+APEoTYbfGIp7FegJopX7pihrarZwEt7HFZ6PgcXxYke4is4IEdGz+rrseJrC4M2LZI7UIBOTmrXtn+3XliDLnDw00Eodbd+atcZIbJuJjJbdqOOapEc5DSIw+ERZppvygEwbazJpuX84mY37Yes0hHwOF9hd8J4eYHQ9qcaPf1H7axWBw76Fz8cOQ3HOwbVa5ggYK4Rb1ipjePjDsV6bQadlG1mbbRcYxTrQP+foxaCLPL74BQX7rxH1TzUOz98luR+Vnu7R9yu+Gv55I0CRlVyjp6aO/65pH5gXl9COxcGFxl6aDRKAhG+HxFdzMsga3n9OC/IdbVhxkCDxbFjmFJkZYLcLDkq2HjmpUt/s8r+LyVqEiyoamZ1kDXGK2YvAkWOoo1ZWDnJTApNTfVAzpTs0VYz2/dF2UKn+qm8JYzUoYLcW6S2BsWCzmaUA=
    distributions: sdist --format=gztar bdist_wheel
    on:
      tags: true
      branch: master
      python: '2.7'
      condition: '"$YAML" = "pyyaml"'



