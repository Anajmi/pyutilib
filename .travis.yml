language: python
matrix:
  include:
  - python: '2.6'
    env: PYRO="Pyro"  YAML="pyyaml"
  - python: '2.7'
    env: PYRO="Pyro"  YAML="pyyaml"
  #- python: '2.7'
  #  env: PYRO="Pyro" JYTHON="org.python:jython-installer:2.7.0"
  #- python: pypy
  #  env: PYRO="Pyro"  YAML="pyyaml"
  #- python: '3.4'
  #  env: PYRO="Pyro4" YAML="pyyaml"
  #- python: '3.5'
  #  env: PYRO="Pyro4" YAML="pyyaml"
  #- python: pypy3
  #  env: PYRO="Pyro4" YAML="pyyaml"
  #- python: '3.5'
  #  env: PYRO="Pyro4" YAML=""
install:
  - if [ -n "${JYTHON}" ]; then source install_jython.sh; fi
  - if [ -n "${YAML}" ]; then pip install pyyaml; fi
  - if [ "${TRAVIS_PYTHON_VERSION}" = "2.6" ]; then pip install ordereddict; fi
  - pip install xlrd
  - pip install openpyxl
  - pip install $PYRO
  - pip install coverage
  - python setup.py develop
script:
  - cd ..
  - cp pyutilib/.coveragerc .
  - test.pyutilib --cat=nightly --cov
after_success:
  - pip install codecov
  - codecov
  - pip install python-coveralls
  - coveralls

  - cd $TRAVIS_BUILD_DIR
  #- pwd
  #- ls
  #- git status
deploy:
  - provider: pypi
    server: 'https://testpypi.python.org/pypi'
    user: whart111
    password:
      secure: MQF17eb6OJAfaF4snNacOI6RYLJkolSVsppCA6zFO9VZ1AtsiIONBwFGfDOX3FafilKJImW2rQzqmdFODFLfykpuuwGkoYhNhbiJyVwmKoSiCUnfatuQGwIOKn92fUHQxl589Y2EMO5LAe/GU5KO+1jZgbYn6XHk0sfhtg1I0C6C//3CjJ85lmV/o/1jx7qmnvhzOHwDyoc0xr8OLVwrskKqobfgq81DPGpr8zgM66lLUa+CfAAxXkQ+9jCo8RPJZdaxRC6rQUnMBRmM6y/9R6VHy6vcC3VFJhsHdiXLR32721D7dqcx4DvDYKnZfBzvxz1Lf0CrzPHFxRBLJhjIsL6tsSQ1JxMBB70x/vAcxtOZIjQ/i4N1JOLrLw8zkGqRyl7pUcfxhCTVJi7AEZw1stLkaROZT3h3Y/C3gO9q9QrV1c09PfIzsPwMZoQQEkHIR3uPrcFCoo0LXoB+OX6JrNb+GPCJfvFvOWApSkanZK/jQP+WRfEeLlbVYH2zhLL4fIbgMgqgeGa+e1eKad2aYpnaZEWahvfOFQIAdoEaVKSSZmiCGrBetZMM1h2xk3i+FMzdRVvJKCRN31pGouDbbA9FZ70aPOuD7vlT7QBXfI3nYQGuwByP3qdd2CxUA8Y6dsdMZHXJs6vhXgZzrmfSKWypcSMZJEvI2itH7DQHCRY=
    distributions: sdist --format=gztar bdist_wheel
    on:
      tags: false
      branch: master
      python: '2.7'
      condition: '"$YAML" = "pyyaml"'
  - provider: pypi
    user: whart111
    password:
      secure: MQF17eb6OJAfaF4snNacOI6RYLJkolSVsppCA6zFO9VZ1AtsiIONBwFGfDOX3FafilKJImW2rQzqmdFODFLfykpuuwGkoYhNhbiJyVwmKoSiCUnfatuQGwIOKn92fUHQxl589Y2EMO5LAe/GU5KO+1jZgbYn6XHk0sfhtg1I0C6C//3CjJ85lmV/o/1jx7qmnvhzOHwDyoc0xr8OLVwrskKqobfgq81DPGpr8zgM66lLUa+CfAAxXkQ+9jCo8RPJZdaxRC6rQUnMBRmM6y/9R6VHy6vcC3VFJhsHdiXLR32721D7dqcx4DvDYKnZfBzvxz1Lf0CrzPHFxRBLJhjIsL6tsSQ1JxMBB70x/vAcxtOZIjQ/i4N1JOLrLw8zkGqRyl7pUcfxhCTVJi7AEZw1stLkaROZT3h3Y/C3gO9q9QrV1c09PfIzsPwMZoQQEkHIR3uPrcFCoo0LXoB+OX6JrNb+GPCJfvFvOWApSkanZK/jQP+WRfEeLlbVYH2zhLL4fIbgMgqgeGa+e1eKad2aYpnaZEWahvfOFQIAdoEaVKSSZmiCGrBetZMM1h2xk3i+FMzdRVvJKCRN31pGouDbbA9FZ70aPOuD7vlT7QBXfI3nYQGuwByP3qdd2CxUA8Y6dsdMZHXJs6vhXgZzrmfSKWypcSMZJEvI2itH7DQHCRY=
    distributions: sdist --format=gztar bdist_wheel
    on:
      tags: true
      branch: master
      python: '2.7'
      condition: '"$YAML" = "pyyaml"'



